(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{cc6f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-drawer",{staticClass:"bg-primary",attrs:{bordered:"",side:"right",width:e.rightSideBarSize,overlay:"",breakpoint:2,behavior:"desktop"},model:{value:e.rightSidebarOpen,callback:function(t){e.rightSidebarOpen=t},expression:"rightSidebarOpen"}},[e.toolBar.loadingSomething?a("q-linear-progress",{attrs:{indeterminate:"",color:"negative"}}):e._e(),"languages"===e.objType?a("languagesSideBar",{attrs:{toolBar:e.toolBar,sideBarOpener:e.sideBarOpener}}):e._e()],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",{staticClass:"q-mt-md q-ml-md"},[a("span",{staticClass:"text-weight-bold q-pt-lg"},[e._v(e._s(e.sideBarOpener.selectedRow.fullLanguageName)+"("+e._s(e.sideBarOpener.selectedRow.name)+")")]),a("br"),a("span",{staticClass:"text-caption",staticStyle:{"font-size":"0.8em"}},[e._v("Language details")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.closeSelf}})],1),a("q-page-sticky",{staticClass:"q-gutter-xs q-ma-sm",staticStyle:{"z-index":"3"},attrs:{position:"top-right",offset:[18,0]}},[e.openedEditing?e._e():a("q-btn",{staticClass:"q-ma-sm",attrs:{fab:"",icon:"edit",color:"red"},on:{click:function(t){e.openedEditing=!0}}}),e.openedEditing&&!e.main.editted?a("q-btn",{staticClass:"text-black q-mr-sm",attrs:{fab:"",icon:"done",color:"transparent",disable:!0}}):e._e(),e.openedEditing&&e.main.editted?a("q-btn",{staticClass:"q-mr-sm",attrs:{fab:"",icon:"done",color:"red"},on:{click:e.submitForm}}):e._e(),e.openedEditing?a("q-btn",{attrs:{fab:"",icon:"close",color:"red"},on:{click:e.resetForm}}):e._e()],1),a("q-tabs",{staticClass:"text-black",attrs:{align:"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"downloaded",label:"Downloaded"}}),a("q-tab",{attrs:{name:"notdownloaded",label:"Not Downloaded"}})],1),a("q-separator"),a("div",[a("q-tab-panels",{staticClass:"q-ma-none q-pa-none",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"downloaded"}},[a("languageDetails",{attrs:{toolBar:e.toolBar,sideBarOpener:e.sideBarOpener,main:e.immediateMain,submit:e.submit,reset:e.reset,downloadedFilter:"downloaded"}})],1),a("q-tab-panel",{attrs:{name:"notdownloaded"}},[a("languageDetails",{attrs:{toolBar:e.toolBar,sideBarOpener:e.sideBarOpener,main:e.immediateMain,submit:e.submit,reset:e.reset,downloadedFilter:"notdownloaded"}})],1)],1)],1)],1)},o=[],r=(a("b03e"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return"downloaded"===e.downloadedFilter?a("div",[a("q-table",{attrs:{grid:"","card-container-class":e.cardContainerClass,data:e.downloadedList,columns:e.downloadedColumns,filter:e.downloadedFilter_,"row-key":"name",title:"Downloaded: "+e.sideBarOpener.selectedRow.numDownloaded+" of "+Object.keys(e.sideBarOpener.selectedRow.langVersionsObj).length,"hide-header":"","hide-bottom":e.hideBottom},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-btn",{attrs:{flat:""}},[a("q-icon",{attrs:{color:"primary",name:"refresh",side:""},on:{click:function(t){return e.sideBarOpener.loadLanguages()}}})],1),a("q-space"),a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Search"},model:{value:e.downloadedFilter_,callback:function(t){e.downloadedFilter_=t},expression:"downloadedFilter_"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)]},proxy:!0},{key:"item",fn:function(t){return[a("div",{staticClass:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},[a("q-card",{staticClass:"bg-white"},[a("q-card-section",{staticClass:"flex flex-center"},[a("q-card",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"bg-primary cursor-pointer q-hoverable",staticStyle:{width:"80vw",overflow:"hidden"}},[a("q-card-section",{staticClass:"text-center bg-secondary",on:{click:function(a){return e.selectVersion(t.row)}}},[a("div",{staticClass:"absolute-top-left q-pa-sm text-white"},[e._v("\n                "+e._s(t.row.source)+"\n              ")]),a("div",[a("div",{staticClass:"text-transparent"},[e._v("\n                    a"),a("br"),e._v("a"),a("br"),e._v("a"),a("br"),e._v("a"),a("br"),e._v("a"),a("br")]),a("div",{staticClass:"absolute-center"},[e._v("\n                    "+e._s(t.row.description)+"\n                  ")])])]),a("q-card-section",{staticClass:"flex flex-center text-white"},[a("div",[e._v("\n                  "+e._s(t.row.name)+"\n                  "),a("q-btn",{staticClass:"absolute-right",staticStyle:{height:"80%: top:10%"},attrs:{icon:"delete"},on:{click:function(a){return e.uninstallBibleModule(t.row)}}},[a("q-tooltip",[e._v("\n                      Delete downloaded Bible version.\n                    ")])],1)],1)])],1)],1)],1)],1)]}}],null,!1,3353688930)})],1):"notdownloaded"===e.downloadedFilter?a("div",[a("q-table",{attrs:{grid:"","card-container-class":e.cardContainerClass,data:e.notDownloadedList,columns:e.downloadedColumns,filter:e.downloadedFilter_,"row-key":"abbreviation",title:"Not Downloaded: "+(Object.keys(e.sideBarOpener.selectedRow.langVersionsObj).length-e.sideBarOpener.selectedRow.numDownloaded)+" of "+Object.keys(e.sideBarOpener.selectedRow.langVersionsObj).length,"hide-header":"","hide-bottom":e.hideBottom},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-btn",{attrs:{flat:""}},[a("q-icon",{attrs:{color:"primary",name:"refresh",side:""},on:{click:function(t){return e.sideBarOpener.loadLanguages()}}})],1),a("q-space"),a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Search"},model:{value:e.downloadedFilter_,callback:function(t){e.downloadedFilter_=t},expression:"downloadedFilter_"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)]},proxy:!0},{key:"item",fn:function(t){return[a("div",{staticClass:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},[a("q-card",{staticClass:"bg-white"},[a("q-card-section",{staticClass:"flex flex-center"},[a("q-card",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"bg-primary cursor-pointer q-hoverable",staticStyle:{width:"80vw",overflow:"hidden"}},[a("q-card-section",{staticClass:"text-center bg-secondary"},[a("div",{staticClass:"absolute-top-left q-pa-sm text-white"},[e._v("\n                "+e._s(t.row.source)+"\n              ")]),a("div",[a("div",{staticClass:"text-transparent"},[e._v("\n                    a"),a("br"),e._v("a"),a("br"),e._v("a"),a("br"),e._v("a"),a("br"),e._v("a"),a("br")]),a("div",{staticClass:"absolute-center"},[e._v("\n                    "+e._s(t.row.description)+"\n                  ")])])]),a("q-card-section",{staticClass:"flex flex-center text-white"},[a("div",[e._v("\n                  "+e._s(t.row.name)+"\n                  "),a("q-btn",{staticClass:"absolute-right",staticStyle:{height:"80%: top:10%"},attrs:{icon:"download"},on:{click:function(a){return e.downloadBibleModule(t.row)}}},[a("q-tooltip",[e._v("\n                     Download Bible version.\n                    ")])],1)],1)])],1)],1)],1)],1)]}}])})],1):e._e()}),l=[];a("ddb0");const d=a("1712").to,c=a("20e6"),m=a("c2a1").default;a("a221")(`./${c.PROJECT.toLowerCase()}/bibleVersions.json`);var h={name:"languageDetails",props:["main","sideBarOpener","toolBar","submit","reset","downloadedFilter"],components:{},async created(){this.refreshList()},data(){return{numDownloaded:0,downloadedFilter_:"",downloadedList:[],notDownloadedList:[],downloadedColumns:[{name:"name",label:"Name",field:"name"},{name:"abbreviation",label:"Abbreviation",field:"abbreviation"},{name:"description",label:"Description",field:"description"},{name:"source",label:"Sorce",field:"source"}],notDownloadedFilter_:"",numNotDownloaded:0}},methods:{refreshList(){this.downloadedList=Object.values(this.sideBarOpener.selectedRow.langVersionsObj).filter((e=>e.downloaded)),this.notDownloadedList=Object.values(this.sideBarOpener.selectedRow.langVersionsObj).filter((e=>!e.downloaded))},async downloadBibleModule(e){return new Promise((async(t,a)=>{this.toolBar.loadingSomethingBigger=!0;let[i,s]=await d(m.downloadBibleModule(e));if(this.toolBar.loadingSomethingBigger=!1,i)return this.$q.notify({type:"negative",message:i.msg||i}),t(!1);this.$q.notify({type:"positive",message:`${e.name} has been downloaded.`}),await this.sideBarOpener.getLangVersions([this.sideBarOpener.selectedRow.name]),this.refreshList()}))},async uninstallBibleModule(e){return new Promise((async(t,a)=>{this.toolBar.loadingSomethingBigger=!0;let[i,s]=await d(m.uninstallBibleModule(e));if(this.toolBar.loadingSomethingBigger=!1,i)return this.$q.notify({type:"negative",message:i.msg||i}),t(!1);this.$q.notify({type:"positive",message:`${e.name} has been removed.`}),await this.sideBarOpener.getLangVersions([this.sideBarOpener.selectedRow.name]),this.refreshList()}))},async selectVersion(e){return new Promise((async(t,a)=>{console.log("selecting ",e);let i=`/#/bible-reader/${e.name}/1/1/`;window.location.assign(i),t(!0)}))},async editUser(){return new Promise((async(e,t)=>{let a=this.selectedRow;this.main.loadingSomething=!0;let[i,s]=await d(m.saveUserData(a));if(this.main.loadingSomething=!1,i)return this.$q.notify({type:"negative",message:i.msg||i}),e(!1);this.$q.notify({type:"positive",message:`Saved changes for ${this.selectedRow.email}`}),await this.main.listUsers(),this.main.editted=!1,e(!0)}))},async deleteUser(e){return new Promise((async(e,t)=>{if(this.whoami.userId===this.main.selectedRow.userId)return this.$q.notify({type:"negative",message:"You can't delete you own account from here."}),t("same account");let[a,i]=await d(dialogs.confirm(this,`Are you sure you want to delete ${this.main.selectedRow.email} account?`,"Delete Account"));return a?e(!1):(this.main.loadingSomething=!0,[a,i]=await d(m.deleteUser(this.main.selectedRow.userId)),this.main.loadingSomething=!1,a?(this.$q.notify({type:"negative",message:a.msg||a}),e(!1)):(this.$q.notify({type:"positive",message:`Account for ${this.main.selectedRow.email} has been deleted.`}),void await this.main.listUsers()))}))},async loginAsUser(e){return new Promise((async(e,t)=>{let a=(await m.whoAmILocally()).userId;if(a===this.main.selectedRow.userId)return this.$q.notify({type:"negative",message:"You are already logged in"}),e();this.main.loadingSomething=!0;let[i,s]=await d(m.loginasUser(this.main.selectedRow.userId));this.main.loadingSomething=!1,i?(this.loggedin=!1,this.$q.notify({type:"negative",message:i.error||i.message||"failed to log in"})):window.location.assign("#/home")}))},async resendActivationEmail(){return new Promise((async(e,t)=>{this.main.loadingSomething=!0;let[a,i]=await d(m.sendActivationEmail({userId:this.main.selectedRow.userId,firstName:this.main.selectedRow.firstName,lastName:this.main.selectedRow.lastName,email:this.main.selectedRow.email,authority:this.main.selectedRow.authority,dateOfBirth:this.main.selectedRow.dateOfBirth,gender:this.main.selectedRow.gender},{activationEmail:!0,showActivationLink:!1},!0));if(this.main.loadingSomething=!1,this.working=!1,a){a=a.msg||a.message||a.error||a;try{a=JSON.parse(a)}catch(s){}if("object"===typeof a){let e=Object.keys(a);a=a[e[0]]}this.$q.notify({type:"negative",message:a}),e(!1)}else this.$q.notify({type:"positive",message:`Activation email has been sent to ${this.main.selectedRow.email}`})}))},displayActivationLink(){this.alert=!1,this.$nextTick((()=>this.alert=!0)),this.alertUserId=this.main.selectedRow.userId}},watch:{downloadedFilter(e){this.refreshList()},selectedRow:{handler(e){JSON.stringify(this.selectedRow)!==JSON.stringify(this.main.selectedRow)?this.main.editted=!0:this.main.editted=!1},deep:!0},submit(e){e&&this.$refs.userRegistrationForm.submit()},reset(e){e&&(this.selectedRow=JSON.parse(JSON.stringify(this.main.selectedRow)))}},computed:{hideBottom(){return!("downloaded"===this.downloadedFilter&&this.downloadedList.length>5||"notdownloaded"===this.downloadedFilter&&this.notDownloadedList.length>5)},cardContainerClass(){if(this.$q.screen.gt.xs)return"grid-masonry grid-masonry--"+(this.$q.screen.gt.sm?"6":"4")}}},g=h,p=a("2877"),u=a("eaac"),b=a("9c40"),w=a("0016"),f=a("2c91"),v=a("27f9"),y=a("f09f"),q=a("a370"),B=a("05c0"),O=a("714f"),_=a("eebe"),S=a.n(_),C=Object(p["a"])(g,r,l,!1,null,null,null),x=C.exports;S()(C,"components",{QTable:u["a"],QBtn:b["a"],QIcon:w["a"],QSpace:f["a"],QInput:v["a"],QCard:y["a"],QCardSection:q["a"],QTooltip:B["a"]}),S()(C,"directives",{Ripple:O["a"]});var k={name:"languagesSideBar",props:["sideBarOpener","toolBar"],created(){this.sideBarOpener.selectedTab||(this.sideBarOpener.selectedTab={}),this.sideBarOpener.selectedTab.languages&&(this.tab=this.sideBarOpener.selectedTab.languages)},components:{languageDetails:x},beforeDestroy(){this.sideBarOpener.selectedTab.languages=this.tab},data(){return{tab:"downloaded",openedEditing:!1,submit:!1,reset:!1,immediateMain:this}},methods:{submitForm(){this.submit=!1,this.$nextTick((()=>this.submit=!0))},closeSelf(){this.sideBarOpener.kjvRightSideBarOpen=!1},resetForm(){this.reset=!1,this.$nextTick((()=>this.reset=!0)),this.openedEditing=!1,this.main.editted=!1}},computed:{}},R=k,$=a("65c6"),D=a("6ac5"),L=a("de5e"),F=a("429bb"),T=a("7460"),j=a("eb85"),Q=a("adad"),N=a("823b"),E=Object(p["a"])(R,n,o,!1,null,null,null),I=E.exports;S()(E,"components",{QToolbar:$["a"],QToolbarTitle:D["a"],QBtn:b["a"],QPageSticky:L["a"],QTabs:F["a"],QTab:T["a"],QSeparator:j["a"],QTabPanels:Q["a"],QTabPanel:N["a"]});a("1712").to;var P={name:"kjvRightSideBar",props:["main","sideBarOpener","objType","toolBar"],created(){},components:{languagesSideBar:I},data(){return{rightSidebarOpen:!0,tab:"login"}},methods:{},computed:{rightSideBarSize(){return this.$q.screen.lt.xs||this.$q.screen.lt.sm||this.$q.screen.lt.md?document.getElementsByTagName("body")[0].clientWidth:.75*document.getElementsByTagName("body")[0].clientWidth}}},A=P,V=a("9404"),M=a("6b1d"),U=Object(p["a"])(A,i,s,!1,null,null,null);t["default"]=U.exports;S()(U,"components",{QDrawer:V["a"],QLinearProgress:M["a"]})}}]);